var QrRemote=QrRemote||{};QrRemote.initScreen=function(a,b,c){var d=!1,e=function(){a.emit("screen:getQrcode",function(a){b.qr.qrCode("showData",a),b.qr.qrCode("isVisible",!0)})},f=function(){b.qr.qrCode("updateStatus","disconnected"),b.qr.qrCode("isVisible",!1)};a.on("remote:action",function(a){switch(a.action){case"pong":b.pong.qrPong("doAction",a.command);break;default:return}}),a.on("control:action",function(a){if(a){var b=jQuery.Event("keyup");if("keydown"==a.action){var d=jQuery.Event("keydown");switch(a.direction){case"up":d.which=38,c.setLeftDown(!0);break;case"down":d.which=40,c.setRightDown(!0)}}if("keyup"==a.action){var b=jQuery.Event("keyup");switch(a.direction){case"up":b.which=38,c.setLeftDown(!1);break;case"down":b.which=40,c.setRightDown(!1)}}}}),a.on("remote:attached",function(){$(".qr-code-token").html("&nbsp;"),c.initGame(),c.startGame()}),a.on("remote:exited",function(){window.location.href="/screen/pong",e()}),a.on("remote:detached",function(){e()}),a.on("screen:reset",function(){window.location.reload()}),a.on("connect",function(){d&&window.location.reload(),d=!0,f()}),a.on("connecting",function(){f()}),a.on("disconnect",function(){f()}),a.emit("screen:ready",function(){e()})};